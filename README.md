# FlatMarket


### Описание файлов и модулей

#### main.go
Главный файл для запуска вашего приложения. Он инициализирует сервер Gin, подключает базу данных, регистрирует маршруты и запускает HTTP-сервер.

#### handlers/auth.go
Этот файл содержит обработчики для авторизации и регистрации пользователей. Он обрабатывает запросы для:
- `/dummyLogin`: генерирует токен для тестовой авторизации.
- `/register`: регистрирует нового пользователя и генерирует токен.
- `/login`: аутентифицирует пользователя по email и паролю и генерирует токен.

#### handlers/house.go
Этот файл содержит обработчики для управления домами. Он обрабатывает запросы для:
- `/house/create`: создаёт новый дом (только для модераторов).
- `/house/:id`: получает список квартир в доме по его номеру.
- `/house/:id/subscribe`: подписывает пользователя на уведомления о новых квартирах в доме.

#### handlers/flat.go
Этот файл содержит обработчики для управления квартирами. Он обрабатывает запросы для:
- `/flat/create`: создаёт новую квартиру.
- `/flat/update`: обновляет статус модерации квартиры (только для модераторов).

#### models/user.go
Этот файл определяет модель пользователя, которая включает поля для email, пароля и типа пользователя (client или moderator).

#### models/house.go
Этот файл определяет модель дома, которая включает поля для адреса, года постройки, застройщика, даты создания и даты последнего добавления новой квартиры.

#### models/flat.go
Этот файл определяет модель квартиры, которая включает поля для номера квартиры, цены, количества комнат, статуса модерации и даты создания.

#### database/database.go
Этот файл отвечает за подключение к базе данных PostgreSQL, используя Gorm. Он также выполняет миграцию моделей `User`, `House` и `Flat`.

#### middleware/auth.go
Этот файл содержит middleware для авторизации. Он проверяет наличие и валидность JWT токена в заголовке запроса, а также проверяет, имеет ли пользователь необходимый уровень доступа для выполнения запроса.

#### utils/jwt.go
Этот файл содержит функции для генерации и парсинга JWT токенов. Он используется для создания токенов при авторизации и регистрации пользователей, а также для проверки токенов в middleware.

### task.txt
Файл содержит описание тестового задания для отбора на Avito Backend Bootcamp. В нем подробно описывается функционал сервиса, который нужно разработать, включая авторизацию, создание домов и квартир, модерацию объявлений, получение списка квартир, и подписку на уведомления. Также указаны условия и требования к реализации сервиса.